
‚≠êÔ∏è JDBC ‚Äî –±–∞–∑–æ–≤–æ–µ API –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ë–î, —Ä–µ–∞–ª–∏–∑—É–µ–º–æ–µ –≤ JDBC –¥—Ä–∞–π–≤–µ—Ä–µ
‚≠êÔ∏è JPA ‚Äî java persistence API - —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ ORM: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–∞–∫ –≤—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å. –ë–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
‚≠êÔ∏è ORM ‚Äî object relation mapping –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ –ë–î, –Ω–∞–ø—Ä–∏–º–µ—Ä Hibernate
‚≠êÔ∏è Hibernate ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω–∞—è ORM –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, —Ä–µ–∞–ª–∏–∑—É—é—â–∞—è JPA, –º–∞–ø–ø–∏–Ω–≥ –∏ –ø—Ä–æ—Å—Ç–µ–π—à–∏–µ SQL –∑–∞–ø—Ä–æ—Å—ã

 –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê
 –ø—Ä–æ—Å—Ç–æ–π API –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è Java-–æ–±—ä–µ–∫—Ç–æ–≤ –≤/–∏–∑ –ë–î
 –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ë–î, –∏—Å–ø–æ–ª—å–∑—É—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ fetching
 –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - —ç—Ç–æ –æ–±—ã—á–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (ORM-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫), –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–∞–∫ JAR
 –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–∞ SQL, –∞ –∏–º–µ—Ç—å –¥–µ–ª–æ —Å –ø—Ä–∏–≤—ã—á–Ω—ã–º–∏ –Ω–∞–º —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö Java.
 –ó–∞–±–æ—Ç–∏—Ç—Å—è –æ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É Java-–∫–ª–∞—Å—Å–∞–º–∏ –∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ –ë–î —Å –ø–æ–º–æ—â—å—é XML-—Ñ–∞–π–ª–æ–≤ –Ω–µ –≤–Ω–æ—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–æ–¥
 –ï—Å–ª–∏ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑–º–µ–Ω–∏—Ç—å –ë–î, —Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏—à—å –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ XML-—Ñ–∞–π–ª—ã

—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–ª–∏ –±–æ–ª–µ–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è —É—Å–ø–µ—à–Ω–æ (commit) –∏–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è (rollback)
–ê–¢–û–ú–ê–†–ù–û–°–¢–¨ - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–ª–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
–°–û–ì–õ–ê–°–û–í–ê–ù–ù–û–°–¢–¨ - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∫–æ–Ω—Å—Ç—Ä–µ–π–Ω—Ç—ã
–ò–ó–û–õ–Ø–¶–ò–Ø - –Ω–∞—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤–∏–¥—è—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥—Ä—É–≥ –¥—Ä—É–≥–∞
–£–°–¢–û–ô–ß–ò–í–û–°–¢–¨ - –∫–æ–º–º–∏—Ç—ã —Å–æ—Ö—Ä—è–Ω—è—é—Ç—Å—è, —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ª–æ–≥-—Ç–∞–±–ª–∏—Ü—ã

Configuration ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –≤—Å—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Hibernate:
–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î, –¥–∏–∞–ª–µ–∫—Ç, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, —Å–≤–æ–π—Å—Ç–≤–∞ Hibernate, —Å–ø–∏—Å–æ–∫ —Å—É—â–Ω–æ—Å—Ç–µ–π
–í –ø—Ä–æ–µ–∫—Ç–µ: XML + StandardServiceRegistry (–∏c–ø–æ–ª—å–∑—É–µ—Ç XML) ‚Üí MetadataSources ‚Üí Metadata ‚Üí SessionFactory

 SessionFactory –≤ Hibernate / EntityManagerFactory –≤ JPA
         –°–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç—ã Session (Hibernate) / EntityManager (JPA)
         –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞, –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ singleton
         –ß–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Hibernate hibernate.cfg.xml –∏–ª–∏ Java-–∫–æ–¥
         –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ø—É–ª JDBC-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (ConnectionProvider).
         –£–ø—Ä–∞–≤–ª—è–µ—Ç –∫–µ—à–µ–º –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è (L2 cache).

 Session –≤ Hibernate / EntityManager –≤ JPA
         –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å Hibernate
         –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π API, –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É—é—â–∏–π –ø–æ–Ω—è—Ç–∏–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
         –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –Ω–∞—á–∞–ª–æ–º –∏ –∫–æ–Ω—Ü–æ–º –ª–æ–≥–∏—á–µ—Å–∫–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (long transaction –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ DB —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π).
         –ù–µ–ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–±—ä–µ–∫—Ç, –ª—ë–≥–∫–∏–π, —Å–æ–∑–¥–∞—ë—Ç—Å—è —á–∞—Å—Ç–æ –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
         –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–≤–∏—á–Ω—ã–º –∫–µ—à–µ–º first-level cache/persistence context
         –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ SQL:
         Session –±–µ—Ä—ë—Ç Connection —É ConnectionProvider (—á–µ—Ä–µ–∑ SessionFactory)
         –°–æ–∑–¥–∞—ë—Ç PrepareStatement —á–µ—Ä–µ–∑ —Ä–µ—Ñ–ª–µ–∫—Å–∏—é —Å Entity, –ø–æ–ª—É—á–∞–µ—Ç ResultSet ‚Äî –∑–∞ —ç—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç JdbcCoordinator –≤–Ω—É—Ç—Ä–∏ Session

 Query ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞: JPQL/HQL, native SQL, criteria API

 Type conversion
 Hibernate –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞–ø–ø–∏—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ Java ‚Üí SQL, –∏—Å–ø–æ–ª—å–∑—É—è –¥–∏–∞–ª–µ–∫—Ç
 @Convert(converter = BirthdayConverter.class) –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AttributeConverter, —á—Ç–æ–±—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å —Ç–∏–ø—ã –º–µ–∂–¥—É Java –∏ –ë–î
 @Type(type = "com.vladmihalcea.hibernate.type.json.JsonBinaryType") –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª–∞—Å—Å–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –µ–≥–æ –ø—É—Ç–∏
 @Type(MyType.class) UserType ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ —Ç–∏–ø–∞ —á–µ—Ä–µ–∑ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ - class MyType implements UserType
 @Enumerated(EnumType.STRING) –∏—Å–ø–æ–ª—å–∑—É–µ–º Enum –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–ª—è –≤ Entity, –≤ –ë–î –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ç–∏–ø VARCHAR
 –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–ø –±–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π metadataBuilder.applyBasicType(new JsonBinaryType());

 PERSISTENCE CONTEXT - –æ–±–ª–∞—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞–º–∏ Hibernate, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑ –ë–î, —Å–ª–µ–¥–∏—Ç –∑–∞ –∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏,
    —Ä–µ—à–∞–µ—Ç, –∫–æ–≥–¥–∞ –∏ –∫–∞–∫–∏–µ SQL-–∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç Session, –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏ —Å–≤–æ–π persistence context
    –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ Entity –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö Session
 –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
 —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
 –∫—ç—à –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è ‚Äî –≤—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏, –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –≤ persistence context, —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤
 –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (dirty checking) ‚Äî Hibernate –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã, –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç SQL UPDATE/DELETE –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ flush()

–ñ–¶
Transient –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –ø–∞–º—è—Ç–∏ new MyEntity(), –Ω–µ –≤ persistence context. –ü–æ–ª–µ Id –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ, –∏–Ω–∞—á–µ –æ–±—ä–µ–∫—Ç –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å detached. –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è.
Persistent - –æ–±—ä–µ–∫—Ç –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π, Hibernate —Å–ª–µ–¥–∏—Ç –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –ø–æ–ª—è—Ö –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å –ë–î
Detached –æ–±—ä–µ–∫—Ç –±—ã–ª –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Persistent, –Ω–æ —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –ª–∏–±–æ –æ–±—ä–µ–∫—Ç —É–¥–∞–ª–µ–Ω –∏–∑ –Ω–µ—ë. –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è. –ú–æ–∂–µ—Ç –ø–æ–ø–∞—Å—Ç—å –≤ –¥—Ä—É–≥—É—é —Å–µ—Å—Å–∏—é.
Removed - –æ–±—ä–µ–∫—Ç –ø–æ–º–µ—á–µ–Ω –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ ‚Äî –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω –∏–∑ –ë–î –ø—Ä–∏ —Ñ–∏–∫—Å–∞—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è

new Entity()-------------------------------->TRANSIENT OR NEW-----------------------------------------------------------garbage
                                                 |
                                        entityManager.persist(entity)
                                        session.save(entity)
                                        session.saveOrUpdate(entity)
    –∏–∑ –ë–î                               –ß–µ—Ä–µ–∑ –∫–∞—Å–∫–∞–¥ –µ—Å–ª–∏ parent persistent, child —Å—Ç–∞–Ω–µ—Ç persistent
session.find(User.class, 1L)                     |
session.get(clazz,id)--------------------->PERSISTENT OR MANAGED-----------------------session.delete(entity)-->REMOVED -->garbage
session.crateQuery(hql)                     |          ^
                                            |          |
                          session.evict(entity)   session.saveOrUpdate(entity)
                          session.clear()         session.update(entity)
                          session.close()         session.merge(entity)
                                            |          ^
                                            |          |
                                              DETACHED-----------------------------------------------------------garbage

Entity - POJO –∫–ª–∞—Å—Å —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, Java –∫–ª–∞—Å—Å –∫–æ—Ç–æ—Ä—ã–π –º–∞–ø–∏—Ç—Å—è –Ω–∞ –ë–î
 –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ SessionFactory –≤ hibernate.cfg –∏–ª–∏ –≤ –∫–æ–¥–µ
POJO - plain old java object, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
 –≤—Å–µ –ø–æ–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∏ –ù–ï final + getters/setters
 –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–æ–ª—è –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å lazy loading, dirty checking –∏ proxy-—Å—É—â–Ω–æ—Å—Ç—è–º–∏
 Entity –∫–ª–∞—Å—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å final - –ø—Ä–æ–∫—Å–∏ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤—Ç—å –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Å —ç—Ç–∏–º –∫–ª–∞—Å—Å–æ–º
 @NoArgsConstructor - Hibernate –∏—Å–ø–æ–ª—å–∑—É–µ—Ç reflection API –∏ –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ –∏–∑ ResultSet –Ω—É–∂–µ–Ω –ø—É—Å—Ç–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
 @AllArgsConstructor
 @Entity - JPA annotation
 –ù–∞–ª–∏—á–∏–µ @Id = ID primary key, –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ (persistent/detached)
 –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

Hibernate –≤—ã–±–∏—Ä–∞–µ—Ç –¥–æ—Å—Ç—É–ø - —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –ø–µ—Ä–≤—É—é –≤—Å—Ç—Ä–µ—á–µ–Ω–Ω—É—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é @Id
–ï—Å–ª–∏ @Id –Ω–∞ –ø–æ–ª–µ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Field Access –¥–ª—è –≤—Å–µ–π —Å—É—â–Ω–æ—Å—Ç–∏
–ï—Å–ª–∏ @Id –Ω–∞ –≥–µ—Ç—Ç–µ—Ä–µ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Property Access –¥–ª—è –≤—Å–µ–π —Å—É—â–Ω–æ—Å—Ç–∏

@Table(name = "table name", schema = "hibernate", uniqueConstraints = —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏, indexes = —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤)
@Column(name = "column name", nullable = false –∏ –¥—Ä—É–≥–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤ String, int, Long, LocalDate, –∏ —Ç. –¥.
@JoinColumn(name = "company_id") - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∏–º—è FK –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π –≥–¥–µ –æ–Ω –µ—Å—Ç—å. –õ–∏–±–æ @Column –ª–∏–±–æ @JoinColumn
@EmbeddedId - –ø–æ–ª–µ, —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–π
    @OrderColumn(name = "item_order") - –≤ –ë–î –±—É–¥–µ—Ç —Å–æ–∑–∞–Ω–æ –ø–æ–ª–µ item_order int not null
    OrderColumn —Ö—Ä–∞–Ω–∏—Ç —Ç–æ, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –æ–Ω–æ –ª–µ–∂–∏—Ç –≤ List, –ø–æ—Ä—è–¥–æ–∫ –º–æ–≥—É –∑–∞–¥–∞–≤–∞—Ç—å –∫–∞–∫–æ–π —Ö–æ—á—É
    –ø—Ä–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ Hibernate –≤—ã–ø–æ–ª–Ω—è–µ—Ç UPDATE —ç—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏: –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ ‚Äî —Å–¥–≤–∏–≥–∞–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
    —Ç–æ–ª—å–∫–æ —Å List –∏ –±–µ–∑ @OrderBy
    –õ—É—á—à–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å–≤—è–∑–∏, –≤ –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –ë–î join-table

    @OrderBy("name ASC")
    @OneToMany –∏–ª–∏ @ManyToMany
    private List<Item> items
    –ö–æ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—à—å —ç—Ç—É –∫–æ–ª–ª–µ–∫—Ü–∏—é –∏–∑ –ë–î, –æ—Ç—Å–æ—Ä—Ç–∏—Ä—É–π –µ–µ —Å –ø–æ–º–æ—â—å—é ORDER BY –≤ SQL
    –º–æ–∂–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º
    –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –≤ –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π, –∏ –≤ –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–π —Å–≤—è–∑–∏ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º

    @SortNatural - –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç Comparable

    @SortComparator(CommentDateComparator.class) - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º  class CommentDateComparator implements Comparator<Comment>

# –í–∏–¥—ã @OneToMany

 –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è ManyToOne + OneToMany - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π
     @OneToMany(mappedBy = "user") * user –≤ —Å—É—â–Ω–æ—Å—Ç–∏ Order –Ω–∞ –¥—Ä–≥–æ–π —Å—Ç–æ—Ä–æ–Ω–µ ‚Äî —ç—Ç–æ –≤–ª–∞–¥–µ–ª–µ—Ü —Å–≤—è–∑–∏, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é @OneToMany = LAZY
     private List<Order> orders;

    @ManyToOne(fetch = FetchType.LAZY) * FetchType —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Ö–æ–∑—è–∏–Ω–∞ —Å–≤—è–∑–∏
    @JoinColumn(name = "user_id") * –±–µ–∑ @JoinColumn –∏ name FK –∏ –∏–º—è c–≥–µ–Ω–µ—Ä–∏—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ <field>_id + nullable = true, unique = false
    private User user;

 –û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è @ManyToOne - —Ç–æ–∂–µ –Ω–µ–ø–ª–æ—Ö–æ–π
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id") –ö–∞–∂–¥–æ–µ Order –∑–Ω–∞–µ—Ç —Å–≤–æ–µ–≥–æ User, User –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ Order, –Ω–µ—Ç join-table
    private User user;
    –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –ø—Ä–∏–¥—ë—Ç—Å—è –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –≤—Ä—É—á–Ω—É—é: SELECT o FROM Order o WHERE o.user = :user
    N+1 –ø—Ä–æ–±–ª–µ–º–µ (–µ—Å–ª–∏ –ø–æ—Ç–æ–º –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤—Å–µ children)
    –Ω–µ–ª—å–∑—è –ø—Ä–æ–π—Ç–∏ –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è –∫ –¥–µ—Ç—è–º –Ω–∞–ø—Ä—è–º—É—é
    –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @OrderBy @OrderColumn CascadeType orphanRemoval –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Ä–æ–¥–∏—Ç–µ–ª—è
    @ManyToOne –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é EAGER ‚Üí Hibernate —Å—Ä–∞–∑—É –¥–µ–ª–∞–µ—Ç join –∏ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è
    –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à –∫–æ–ª–ª–µ–∫—Ü–∏–π - 2nd level collection cache
    –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ batch-fetch –∏–ª–∏ subselect fetch –¥–ª—è –¥–µ—Ç–µ–π
    –õ—é–±–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ —Ä–æ–¥–∏—Ç–µ–ª—é ‚Üí –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

 –û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è @OneToMany
     @OneToMany
         @JoinTable(
             name = "parent_child", * –Ω–∞–∑–≤–∞–Ω–∏–µ –±—É–¥—É—â–µ–π —Ç–∞–±–ª–∏—Ü—ã
             joinColumns = @JoinColumn(name = "parent_id"), * –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏
             inverseJoinColumns = @JoinColumn(name = "child_id") * –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏
         )
     private List<Order> orders;
     FK –ù–ï —Ö—Ä–∞–Ω–∏—Ç—Å—è —É child, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è join-table: parent_children(parent_id, child_id) - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ INSERT/DELETE

 –ü–ª–æ—Ö–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
    –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π, –Ω–æ –≤–ª–∞–¥–µ–ª–µ—Ü ‚Äî OneToMany = @JoinColumn –≤–º–µ—Å—Ç–æ mappedBy
    mappedBy –±–µ–∑ ManyToOne
    –ª—é–±—ã–µ —Å—Ö–µ–º—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤–ª–∞–¥–µ–ª—å—Ü–µ–º FK

Persistent Collections - –æ–±–µ—Ä—Ç–∫–∏ –Ω–∞–¥ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏
List - PersistentList –∏–ª–∏ PersistentBag(List –±–µ–∑ @OrderColumn) - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞, –≤–æ–∑–º–æ–∂–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã
Set - PersistentSet - –Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, —Ç—Ä–µ–±—É–µ—Ç equals/hashCode, –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç cascade-–ø—Ä–æ–±–ª–µ–º, –∫—Ä–∞–π–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è manyToMany
Map - PersistentMap - –Ω–∞–ø—Ä–∏–º–µ—Ä —Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–ª—é—á–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è, –∞ –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ —ç–Ω—Ç–∏—Ç–∏ User @MapKey(name="column_user_name") Map<String,User> users;
                      @MapKeyColumn(name = "attr_key") - –¥–∞–Ω–Ω–∞—è –∞–Ω–æ—Ç–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–æ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞, –±–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è –µ–µ —Ä–∞–±–æ—Ç—ã
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é

@GeneratedValue(strategy = GenerationType.IDENTITY) - –ø–æ–ª–µ –∞–≤—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π ID
GenerationType.IDENTITY id –≥–µ–Ω–µ—Ä–∏—Ç –°–£–ë–î, Hibernate –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–ª—É—á–∏—Ç—å ID, –¥–µ–ª–∞–µ—Ç INSERT –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –Ω–µ—Ç batch insert
GenerationType.SEQUENCE –∏—Å–ø–æ–ª—å–∑—É–µ—Ç sequence –ë–î, Hibernate –≤—ã–∑—ã–≤–∞–µ—Ç nextval() –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ ID, –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–ª—É—á–∞—Ç—å ID, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç batch insert, insert –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –¥–æ flush
GenerationType.AUTO Hibernate —Å–∞–º –≤—ã–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ë–î, IDENTITY, SEQUENCE –∏–ª–∏ TABLE. –¥–ª—è Postgres –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ sequence
GenerationType.TABLE –µ—Å–ª–∏ –ë–î –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ id, —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID
UUID Hibernate –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π UUID –¥–æ –≤—Å—Ç–∞–≤–∫–∏, ID –¥–ª–∏–Ω–Ω–µ–µ, —Ö—É–∂–µ —á–∏—Ç–∞—é—Ç—Å—è –∏ —á—É—Ç—å —Ç—è–∂–µ–ª–µ–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è

 fetch - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∑–∞–≥—Ä—É–∑–∫–∏: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é EAGER, –¥–µ–ª–∞–µ—Ç user LEFT JOIN company –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
         LAZY –¥–µ–ª–∞–µ—Ç LEFT JOIN company –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä getCompany(). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç proxy –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ id –∫–æ–º–ø–∞–Ω–∏–π
         Persistent collection ‚Äî –æ–±—ë—Ä—Ç–∫–∞ –≤–æ–∫—Ä—É–≥ –∫–æ–ª–ª–µ–∫—Ü–∏–π, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–π Hibernate —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
         –ù–µ –∑–∞–º–µ–Ω—è–π –∫–æ–ª–ª–µ–∫—Ü–∏—é –Ω–æ–≤–æ–π! company.setEmployees(newList), —Ç—ã –∑–∞–º–µ–Ω—è–µ—à—å PersistentBag –Ω–∞ –æ–±—ã—á–Ω—ã–π ArrayList
         –Ω–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —ç—Ç–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–µ—Å—Å–∏–∏ - LazyInitializationException
 optional - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç null: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ—Ö user, –¥–∞–∂–µ –±–µ–∑ company
         false - –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç null, –¥–µ–ª–∞–µ—Ç (–ø—Ä–∏ fetch = eager) INNER JOIN - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –∫–æ–º–ø–∞–Ω–∏—è
 cascade -  –∫–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–∞—Å–∫–∞–¥–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫ —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å—É—â–Ω–æ—Å—Ç—è–º, OneToMany –∏ ManyToMany, –∫–æ–≥–¥–∞ –¥–µ—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç —Ä–æ–¥–∏—Ç–µ–ª—é
        ALL	–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (PERSIST, MERGE, REMOVE, REFRESH, DETACH)
        PERSIST	–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–æ—á–µ—Ä–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏
        MERGE	–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—è (merge) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–µ—Ç–∏
        REMOVE	–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –¥–æ—á–µ—Ä–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏
        REFRESH	–ü—Ä–∏ refresh —Ä–æ–¥–∏—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–µ—Ç–∏ –∏–∑ –ë–î
        DETACH	–ü—Ä–∏ detach —Ä–æ–¥–∏—Ç–µ–ª—è –æ—Ç—Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –¥–µ—Ç–∏ –æ—Ç —Å–µ—Å—Å–∏–∏
 orphanRemoval = true ‚Äî —ç—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–π @OneToMany, @OneToOne. E—Å–ª–∏ –¥–æ—á–µ—Ä–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ –Ω–µ –∏–º–µ—é—Ç —Å–º—ã—Å–ª–∞ –±–µ–∑ —Ä–æ–¥–∏—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, Address —É User);
 –ï—Å–ª–∏ —É –¥–æ—á–µ—Ä–Ω–µ–π —Å—É—â–Ω–æ—Å—Ç–∏ —É–¥–∞–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—è ‚Äî —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ –æ–Ω –æ—Å–∏—Ä–æ—Ç–µ–ª, –∏ –µ–≥–æ –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏:
EAGER - –∂–∞–¥–Ω–∞—è, —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏, JOIN –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è @OneToMany(fetch = FetchType.LAZY) –∏–ª–∏ –≤ JPQL/HQL –∑–∞–ø—Ä–æ—Å–µ
    JOIN FETCH –∏ –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ (setFirstResult/setMaxResults) –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç. query.setFirstResult(0).setMaxResults(10);
    Hibernate –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ª–∏–º–∏—Ç –∫ —Å—Ç—Ä–æ–∫–∞–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –∞ –Ω–µ –∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º User
    –û–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –æ–±—Ö–æ–¥–∞ —Å–Ω–∞—á–∞–ª–∞ SELECT –¥–ª—è id –≥–ª–∞–≤–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏, –ø–æ—Ç–æ–º SELECT —Å JOIN –¥–ª—è –≤—ã—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

CASH
 1 —É—Ä–æ–≤–µ–Ω—å, –∫—ç—à –°–µ—Å—Å–∏–∏, –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–µ—à–∏—Ä—É–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏ –≤ persistence context, —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Hibernate
 2 —É—Ä–æ–≤–µ–Ω—å, –∫—ç—à SessionFactory –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —è–≤–Ω–æ –≤–∫–ª—é—á–µ–Ω, –∫–µ—à –º–µ–∂–¥—É app –∏ –ë–î, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç Hibernate –ø–µ—Ä–µ—Å—Ç–∞—Ç—å —Ö–æ–¥–∏—Ç—å –≤ –ë–î –∑–∞ –æ–¥–Ω–∏–º–∏ –∏ —Ç–µ–º–∏ –∂–µ —Å—É—â–Ω–æ—Å—Ç—è–º–∏
    –∂–∏–≤—ë—Ç –≤ —Ä–∞–º–∫–∞—Ö SessionFactory, —Ä–∞–∑–¥–µ–ª—è–µ—Ç—Å—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ —Å–µ—Å—Å–∏—è–º–∏, –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ø–∞–º—è—Ç–∏, Redis, —Ñ–∞–π–ª–∞—Ö. –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤–Ω–µ—à–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π
    –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: –ß—Ç–µ–Ω–∏–µ –ø—Ä–µ–æ–±–ª–∞–¥–∞–µ—Ç –Ω–∞–¥ –∑–∞–ø–∏—Å—å—é
 3 —É—Ä–æ–≤–µ–Ω—å, Query Cache –∫–µ—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –∑–∞–ø—Ä–æ—Å–∞–º –∏ –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º, Query Cache —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö L2 Cache

HQL - Hibernate Query Language ‚Äì –æ–±—ä–µ–∫—Ç–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Entity-–∫–ª–∞—Å—Å–∞–º–∏ –∏ –∏—Ö –ø–æ–ª—è–º–∏
Hibernate —Ç—Ä–Ω–∞—Å–ª–∏—Ä—É–µ—Ç HQL –≤ SQL: —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –ë–î. —Ä–∞–±–æ—Ç–∞ —Å Entity. –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–µ–π @OneToMany, @ManyToOne –∏ —Ç.–¥.
–ø—Ä–∏–º–µ—Ä—ã:

–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ Java-—Å–≤—è–∑—è–º! –ù–µ –ø–æ FK-–∫–æ–ª–æ–Ω–∫–∞–º
select u from User u
join u.company c
where c.name = :name

–ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–≤—è–∑—å —Å—Ä–∞–∑—É, –∏–∑–±–µ–≥–∞—è LazyInitializationException
select u from User u
left join fetch u.company
where u.id = :id

List<User> list = session.createQuery("from User", User.class).getResultList();
User user = session.createQuery("from User u where u.id = :id", User.class).setParameter("id", 3L).uniqueResult();

Criteria API - –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ java
–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö –∫–æ–≥–¥–∞:
—É—Å–ª–æ–≤–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ (–ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
–∑–∞–ø—Ä–æ—Å—ã —Å–ª–æ–∂–Ω—ã–µ (–º–Ω–æ–≥–æ –ø—Ä–µ–¥–∏–∫–∞—Ç–æ–≤, –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤)
–Ω—É–∂–Ω–∞ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–æ—à–∏–±–∫—É –∑–∞–º–µ—Ç–∏—à—å –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏)
–Ω—É–∂–µ–Ω –ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã–π JPA-–ø–æ–¥—Ö–æ–¥ –±–µ–∑ HQL

native SQL
session.createNativeQuery("SELECT * FROM users");


BATCH - –ï—Å–ª–∏ L1 Cache –Ω–µ –æ—á–∏—â–∞—Ç—å, Hibernate –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ 100000 –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏, —á—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ OutOfMemoryError, hibernate.jdbc.batch_size –Ω–∞ 50
for(int i = 0; i < 100000; i++){
   Developer developer = new Developer(...);
   session.save(developer);       // 1. –î–æ–±–∞–≤–ª—è–µ–º –æ–±—ä–µ–∫—Ç –≤ L1 Cache
   if(i % 50 == 0){
       session.flush();           // 2. –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î
       session.clear();           // 3. –û—á–∏—â–∞–µ–º L1 Cache
   }
}
–ü–†–û–ë–õ–ï–ú–´
 #1
    –ø—Ä–∏ –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–≤—è–∑—è—Ö @OneToMany, @ManyToOne, @ManyToMany –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ –≤ equals() –∏ hashCode()
    equals –∏ hashCode –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –ø–æ–ª—è, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ business key, –Ω–∞–ø—Ä–∏–º–µ—Ä email
    –ù–∏–∫–æ–≥–¥–∞ –ù–ï –≤–∫–ª—é—á–∞–µ–º –≤ equals/hashCode: –∫–æ–ª–ª–µ–∫—Ü–∏–∏, —Å–≤—è–∑–∏, –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –≤–µ–¥—É—Ç –∫ –¥—Ä—É–≥–∏–º —Å—É—â–Ω–æ—Å—Ç—è–º
    –ü—Ä–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å—Ç–æ—Ä–æ–Ω—ã Many –≤ Hash —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞ —Å equals/hashSet
 #1 –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å id, –æ–Ω –≥–µ–Ω–µ—Ä–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ -> —Å—É—â–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç –±—ã—Ç —Ä–∞–≤–Ω—ã, –∞ –ø–æ—Å–ª–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è id hashCode –∏ –≤–æ–≤—Å–µ –º–µ–Ω—è–µ—Ç—Å—è
 #2 —Ç–∞–∫–∂–µ –Ω–µ—Ç –ø–æ—Ä—è–¥–∫–∞ –∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π —Ç.–∫. equals/hashSet –±—É–¥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —É proxy
 —Ä–µ—à–µ–Ω–∏–µ -> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–∫–ª—é—á–∏ (natural keys)

FOR UPDATE –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Hibernate / JPA ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞–ø–∏—Å–µ–π (pessimistic locking),
–∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è "–≥–æ–Ω–∫–∏" –º–µ–∂–¥—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏.

 # –ü—Ä–æ–±–ª–µ–º–∞ N + 1 –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è N –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ SQL-–∑–∞–ø—Ä–æ—Å–∞
    Hibernate –¥–µ–ª–∞–µ—Ç –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –µ—â—ë N –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π ‚Äî –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥—É—é –∑–∞–ø–∏—Å—å
    FetchType.LAZY –Ω–µ —Å–ø–∞—Å–∞–µ—Ç –æ—Ç –ø—Ä–æ–±–ª–µ–º—ã

 # –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ - –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å Lost Update - —Ä–∞–±–æ—Ç–∞—Ç–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ - –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞–ø–∏—Å–µ–π
    —Ç–∏–ø—ã –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫:
    –ø–æ –¥–µ—Ñ–æ–ª—Ç—É —É Entity –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∞ @OptimisticLocking(type=VERSION)
    @OptimisticLocking(type=ALL) - –ß—Ç–æ–±—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ –≤–µ—Ä—Å–∏–∏
    @OptimisticLocking(type=DIRTY) - –ï—Å–ª–∏ –Ω–µ—Ç @Version, –Ω–æ –Ω—É–∂–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞. –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
    @OptimisticLocking(type=NONE) - –û—Ç–∫–ª—é—á–∞–µ—Ç –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É

    –î–µ—Ñ–æ–ª—Ç–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—è –≤ Entity + –æ–ø–µ—Ä–∞—Ü–∏—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏(session.beginTransaction() –∏–ª–∏ @Transactional –≤ —Å–µ—Ä–≤–∏—Å–Ω–æ–º —Å–ª–æ–µ)
    Hiber: –≥–µ–Ω–µ—Ä–∏—Ç –∫–æ–ª–æ–Ω–∫—É version, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–∏–¥–∞—Ç—å OptimisticLockException –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ
               —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–æ–±–∞–≤–ª—è—Ç—å UPDATE, –≤ —É—Å–ª–æ–≤–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è WHERE version=?, –ï—Å–ª–∏ —Å—É—â–Ω–æ—Å—Ç—å –Ω–µ –∏–∑–º–µ–Ω—è–ª–∞—Å—å, –≤–µ—Ä—Å–∏—è –Ω–µ —É–≤–µ–ª–∏—á–∏—Ç—Å—è
    @Version
    private Long version;

    –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞—â–∏—â–∏—Ç—å –Ω–µ UPDATE –æ–ø–µ—Ä–∞—Ü–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ–º LockModeType - —Ç—Ä–µ–±—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ - –ª–æ–∫–∞–ª—å–Ω–∞—è Lock, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç @Version
    session.find(User.class, id, LockModeType.OPTIMISTIC);  –ø—Ä–∏ –∫–æ–º–º–∏—Ç–µ —É–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–∏–∫—Ç–æ –Ω–µ –∏–∑–º–µ–Ω—è–ª –æ–±—ä–µ–∫—Ç —Å –º–æ–º–µ–Ω—Ç–∞ —á—Ç–µ–Ω–∏—è
    session.lock(order, LockModeType.OPTIMISTIC); Hiber –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º—É—é –≤–µ—Ä—Å–∏—é. –ù–∞ —Ñ–ª–µ—à–µ/–∫–æ–º–º–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç, –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –ª–∏ –≤–µ—Ä—Å–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

    OPTIMISTIC	–¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä—Å–∏–∏ –Ω–∞ commit –¥–∞–∂–µ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏
    OPTIMISTIC_FORCE_INCREMENT	–¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä—Å–∏–∏ + —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é –≤—Å–µ–≥–¥–∞, –¥–∞–∂–µ –±–µ–∑ UPDATE

 # @DynamicUpdate
    –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å UPDATE —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –ø–æ–ª–µ–π, –∞ –Ω–µ –¥–ª—è –≤—Å–µ—Ö –∫–æ–ª–æ–Ω–æ–∫ —Å—É—â–Ω–æ—Å—Ç–∏
    –ü–ª—é—Å—ã: –º–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –≤ UPDATE, –º–µ–Ω—å—à–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –¥–ª—è —à–∏—Ä–æ–∫–∏—Ö —Ç–∞–±–ª–∏—Ü
    –ú–∏–Ω—É—Å—ã:–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π SQL ‚Üí —Ö—É–∂–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

    —á—É—Ç—å —Ö—É–∂–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ ORM

 # Embeddable
    @Embeddable * –Ω–µ Entity, –Ω–µ—Ç ID, –ù–ï –∏–º–µ—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ primary key, –ù–ï —Å—É—â–µ—Å—Ç–≤—É—é—Ç –±–µ–∑ –≤–ª–∞–¥–µ–ª—å—Ü–∞, –≤—Å–µ–≥–¥–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π join-—Ç–∞–±–ª–∏—Ü–µ
    class Address {
        private String city;
        private String street;
    }

    @Entity
    class User {
        @Id
        private Long id;

        @ElementCollection * –ö–æ–ª–ª–µ–∫—Ü–∏—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –∞ –Ω–µ —Å—É—â–Ω–æ—Å—Ç–µ–π
        @CollectionTable(name = "user_addresses") * –ò–º—è —Ç–∞–±–ª–∏—Ü—ã, –≥–¥–µ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
        private Set<Address> addresses = new HashSet<>(); * –°–∞–º–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è value-–æ–±—ä–µ–∫—Ç–æ–≤

 # –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –Ω–∞–¥–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, –∫–æ–Ω—Å–ø–µ–∫—Ç –Ω–µ–ø–æ–ª–Ω—ã–π
    SINGLE_TABLE - —Å–∞–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –≤–∏–¥–Ω–∞ –≤—Å—è –∏–µ—Ä–∞—Ä—Ö–∏—è –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ, –Ω–µ—Ç JOIN –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –µ—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ —á–∏—Å—Ç–æ—Ç—ã –º–æ–¥–µ–ª–∏
    @Inheritance(strategy = InheritanceType.SINGLE_TABLE)
    @DiscriminatorColumn(name = "dtype")
    public abstract class Payment–•{ ... }
    @Entity
    public class CreditCardPayment extends Payment {  }
    @Entity
    public class PaypalPayment extends Payment { ... }

    JOINED ‚Äî –∫–∞–∂–¥–∞—è —Å—É—â–Ω–æ—Å—Ç—å –≤ —Å–≤–æ–µ–π —Ç–∞–±–ª–∏—Ü–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —á–∏—Å—Ç–∞—è –ë–î –∏–ª–∏ —Å—Ç—Ä–æ–≥–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
    @Entity
    @Inheritance(strategy = InheritanceType.JOINED)
    public abstract class Vehicle { ... }
    @Entity
    public class Car extends Vehicle { ... }
    @Entity
    public class Truck extends Vehicle { ... }

    TABLE_PER_CLASS ‚Äî –∫–∞–∂–¥–∞—è —Å—É—â–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ —Å–≤–æ–µ–π —Ç–∞–±–ª–∏—Ü–µ. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–¥–∫–æ ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–æ—á–µ—Ä–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ –æ–≥—Ä–æ–º–Ω—ã–µ –∏ –æ—á–µ–Ω—å —Ä–∞–∑–Ω—ã–µ
    @Entity
    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
    public abstract class Product { ... }
    @Entity
    public class Book extends Product { ... }
    @Entity
    public class Video extends Product { ... }

Hibernate –°–ê–ú —Å–æ–∑–¥–∞—ë—Ç join-—Ç–∞–±–ª–∏—Ü—É, –≤—Å–µ–≥–æ 3 —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ Hibernate –≤—ã–Ω—É–∂–¥–µ–Ω —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Ç–∞–±–ª–∏—Ü—É:
    @ManyToMany - —É —Å—É—â–Ω–æ—Å—Ç–µ–π –Ω–µ—Ç –º–µ—Å—Ç–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–µ–∏—è FK
    user_roles = user_id (FK) + role_id (FK)

    @OneToMany –±–µ–∑ mappedBy, –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª–æ–∂–∏—Ç—å FK –≤ child, —Ç–∞–∫ –∫–∞–∫ child –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è –Ω–∞ parent

    @ElementCollection - —É –Ω–µ—ë –Ω–µ—Ç id

–ê–†–•–ò–í
‚≠êÔ∏è Spring Data JPA - —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å Hibernate, —Ä–µ–∞–ª–∏–∑—É–µ—Ç JPA, –º–∞–ø–ø–∏–Ω–≥ –∏–∑–±–∞–≤–∏–ª—è–µ—Ç –æ—Ç –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ –≤–æ–∑–Ω–∏ —Å —Å–µ—Å—Å–∏—è–º–∏, –ø–ª—é—Å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã.
‚≠êÔ∏è Spring Data JDBC –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ—Ö–æ–∂–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ JDBC ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Spring Data JPA. –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º —É –Ω–µ–≥–æ JDBC –±–µ–∑ –ø–æ—Å—Ä–µ–¥–Ω–∏—á–µ—Å—Ç–≤–∞ Hibernate. –Ω–µ—Ç –∫—ç—à–µ–π, –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏, –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

–í–∞–Ω–∏–ª—å–Ω—ã–π Hibernate –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–∫–æ–º —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äî —É–º–µ–ª–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫—ç—à–∞–º–∏ 1 –∏ 2 —É—Ä–æ–≤–Ω—è, —Ä–∞–∑–ª–∏—á–∞–µ—Ç persist/save/merge, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω—É–∂–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–¥.
–ê –≤–æ—Ç JPA –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º. –ü–æ—ç—Ç–æ–º—É –≤ Spring Data JPA –º–Ω–æ–≥–∏–µ —Ö–∏–±–µ—Ä–Ω–µ–π—Ç —Ñ–∏—á–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.
–ü—Ä–∏–º–µ—Ä ‚Äî –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–π –∏ –∫—ç—à 1 —É—Ä–æ–≤–Ω—è. Spring Data –≤ –æ–±—â–µ–º —Å–ª—É—á–∞–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∏—Ç–æ–≥–µ –Ω–µ—Ç, –∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π –ª–æ–≤–∏–º —ç–∫—Å–µ–ø—à–Ω.
–ö—ç—à 2 —É—Ä–æ–≤–Ω—è –∏ EntityGraph –ø–æ–ø—Ä–∞–≤—è—Ç —Å–∏—Ç—É–∞—Ü–∏—é, –Ω–æ —ç—Ç–æ —É–∂–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å:) –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–µ–π "—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π", –Ω–∞–¥–æ –∑–Ω–∞—Ç—å –∏ Hibernate, –∏ –∫–∞–∫ Spring –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Hibernate.

–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç! –ù–µ –ø—É—Ç–∞–π—Ç–µ –¥–≤–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
üå∏ Spring JDBC —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏. –ó–∞–ø—Ä–æ—Å—ã, –º–∞–ø–ø–∏–Ω–≥ —Å—É—â–Ω–æ—Å—Ç–µ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –ø–∏—à–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
üåπ Spring Data JDBC –¥–∞—ë—Ç —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∞–±—Å—Ç—Ä–∞—Ü–∏–∏ ‚Äî —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –†–∞–±–æ—Ç–∞ c –∑–∞–ø—Ä–æ—Å–∞–º–∏, –º–∞–ø–ø–∏–Ω–≥–æ–º –∏ —Ç—Ä–∞–Ω–∑–∞—Ü–∏—è–º–∏ —É–ø—Ä–æ—â–∞–µ—Ç—Å—è –∑–∞ —Å—á—ë—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π

<property name="hibernate.hbm2ddl.auto">create-drop</property>
create-drop H —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏ —É–¥–∞–ª—è–µ—Ç –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
none	–ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç —Å –ë–î (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
validate	–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã –∏ –∫–æ–ª–æ–Ω–∫–∏ –≤ –ë–î —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç Entity. –û—à–∏–±–∫–∞, –µ—Å–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç
update	–û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ö–µ–º—É ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã/–ø–æ–ª—è, –Ω–æ –Ω–µ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ
create	–ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —Å–æ–∑–¥–∞—ë—Ç –∑–∞–Ω–æ–≤–æ

–ü–†–û–ë–õ–ï–ú–´:
–Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–≤—É—Ö –º–æ–¥–µ–ª–µ–π: java-–æ–±—ä–µ–∫—Ç—ã –≤ RAM + —Ç–∞–±–ª–∏—Ü—ã –≤ –°–£–ë–î –≤ HDD
–º–∞–ø–ø–∏–Ω–≥ table Ticket --> –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º TicketDAO <-- java class Ticket
lazy loading - –µ—Å—Ç—å –¥–≤–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è
–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤ –∫–ª–∞—Å—Å–∞—Ö, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
–†–ï–®–ï–ù–ò–ï:
ORM - object relational mapping - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—É—é
Hibernate ‚Äî ORM –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, —Ä–µ–∞–ª–∏–∑—É—é—â–∞—è JPA, –º–∞–ø–ø–∏–Ω–≥ –∏ –ø—Ä–æ—Å—Ç–µ–π—à–∏–µ SQL –∑–∞–ø—Ä–æ—Å—ã

—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–æ–∫–µ—Ä
—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–∑ postgres —á–µ—Ä–µ–∑ cmd, –≥–¥–µ 5433 –ø–æ—Ä—Ç –¥–æ–∫–µ—Ä–∞, 5432 –ø–æ—Ä—Ç –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
docker run --name some-postgres -e POSTGRES_PASSWORD=pass -p 5433:5432 -d postgres
–∫–æ–º–∞–Ω–¥–∞ –≤–∑—è—Ç–∞ –æ—Ç—Å—é–¥–∞ https://hub.docker.com/_/postgres
–≤ –∏–¥–µ–µ DataBase: user - postgres, –ø–∞—Ä–æ–ª—å pass, –ø–æ—Ä—Ç - 5433, —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏–¥–µ–∏ —Å –°–£–ë–î, –∞ –¥—Ä–∞–π–≤–µ—Ä –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
